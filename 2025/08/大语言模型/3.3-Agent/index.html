<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3.3 Agent | Hexo</title>
    
<link rel="stylesheet" href="/css/style.css">

    <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
          TeX: {
            extensions: ["amsmath.js", "cancel.js"],
          }
        });
    </script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex/dist/katex.min.css"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
<meta name="generator" content="Hexo 7.3.0"></head>
<body>
    <div class="container">
        <header class="post-navbar">
    <div class="nav-left">
        <div class="nav-item search-trigger">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"><path fill="currentColor" d="M21.71 20.29l-3.68-3.68A8.963 8.963 0 0 0 20 11c0-4.97-4.03-9-9-9s-9 4.03-9 9 4.03 9 9 9c2.49 0 4.74-1.01 6.32-2.67l3.68 3.68a1 1 0 0 0 1.42 0a1 1 0 0 0 0-1.42ZM4 11a7 7 0 1 1 14 0a7 7 0 0 1-14 0Z"/></svg>
            <span style="font-size: small;">æœç´¢...</span>
            <span class="search-shortcut" style="font-size: small;">Ctrl K</span>
        </div>
    </div>
    <div style="width: 10px;"></div>
    <div class="nav-right">
        <div class="nav-item theme-switcher">
            <svg class="sun" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12a4 4 0 1 0 8 0a4 4 0 1 0-8 0m-5 0h1m8-7V4m-5.6 1.4L4.8 6.8M16 17.2l1.4 1.4M20 12h1m-6-5.2l1.4-1.4M12 21v-1"/></svg>
            <svg class="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3a6 6 0 0 0 9 9a9 9 0 1 1-9-9Z"/></svg>
        </div>
    </div>
</header>

<div id="search-modal" class="modal-overlay" style="display: none;">
    <div class="modal-content">
        <input type="text" id="search-input" placeholder="è¾“å…¥å…³é”®å­—æœç´¢...">
        <div id="search-results"></div>
    </div>
</div>
<div class="post-layout">
  <aside class="post-sidebar">
    
    
      
      <nav>
          <div class="sidebar-top">
              <a href="/" class="back-to-home-link" style="display: flex; align-items: center">
                  <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m15 18l-6-6l6-6"/></svg>
                  <span>è¿”å›é¦–é¡µ</span>
              </a>
              <h3>å¤§è¯­è¨€æ¨¡å‹</h3>
          </div>
          <ul>
              
                  <li class="sidebar-group">
                      <details open>
                          <summary>
                              <svg class="sidebar-arrow" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"><path fill="currentColor" d="m15.5 12.001l-5.75 5.75c-.15.15-.325.225-.525.225s-.375-.075-.525-.225c-.3-.3-.3-.775 0-1.075l5.225-5.25l-5.225-5.25c-.3-.3-.3-.775 0-1.075s.775-.3 1.075 0l5.75 5.75c.15.15.225.325.225.525s-.075.375-.225.525Z"/></svg>
                              <span class="sidebar-summary-text">1 å¼ºåŒ–å­¦ä¹ </span>
                          </summary>
                          <div class="details-content">
                              <ul>
                                  
                                      <li class="sidebar-item ">
                                          <a href="/2025/09/%E5%A4%A7%E8%AF%AD%E8%A8%80%E6%A8%A1%E5%9E%8B/1.1-%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0%E5%85%A5%E9%97%A8/">1.1 Q-Learning</a>
                                      </li>
                                  
                              </ul>
                          </div>
                      </details>
                  </li>
              
                  <li class="sidebar-group">
                      <details open>
                          <summary>
                              <svg class="sidebar-arrow" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"><path fill="currentColor" d="m15.5 12.001l-5.75 5.75c-.15.15-.325.225-.525.225s-.375-.075-.525-.225c-.3-.3-.3-.775 0-1.075l5.225-5.25l-5.225-5.25c-.3-.3-.3-.775 0-1.075s.775-.3 1.075 0l5.75 5.75c.15.15.225.325.225.525s-.075.375-.225.525Z"/></svg>
                              <span class="sidebar-summary-text">2 æ„å»ºä¸€ä¸ªå¤§æ¨¡å‹</span>
                          </summary>
                          <div class="details-content">
                              <ul>
                                  
                                      <li class="sidebar-item ">
                                          <a href="/2025/08/%E5%A4%A7%E8%AF%AD%E8%A8%80%E6%A8%A1%E5%9E%8B/2.1-%E5%A4%A7%E6%A8%A1%E5%9E%8B%E9%A2%84%E8%AE%AD%E7%BB%83/">1.1 é¢„è®­ç»ƒ</a>
                                      </li>
                                  
                              </ul>
                          </div>
                      </details>
                  </li>
              
                  <li class="sidebar-group">
                      <details open>
                          <summary>
                              <svg class="sidebar-arrow" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"><path fill="currentColor" d="m15.5 12.001l-5.75 5.75c-.15.15-.325.225-.525.225s-.375-.075-.525-.225c-.3-.3-.3-.775 0-1.075l5.225-5.25l-5.225-5.25c-.3-.3-.3-.775 0-1.075s.775-.3 1.075 0l5.75 5.75c.15.15.225.325.225.525s-.075.375-.225.525Z"/></svg>
                              <span class="sidebar-summary-text">3 åº”ç”¨å¼€å‘</span>
                          </summary>
                          <div class="details-content">
                              <ul>
                                  
                                      <li class="sidebar-item ">
                                          <a href="/2025/09/%E5%A4%A7%E8%AF%AD%E8%A8%80%E6%A8%A1%E5%9E%8B/3.1-LangChain/">3.1 LangChainç®€ä»‹</a>
                                      </li>
                                  
                                      <li class="sidebar-item ">
                                          <a href="/2025/09/%E5%A4%A7%E8%AF%AD%E8%A8%80%E6%A8%A1%E5%9E%8B/3.2-RAG/">3.2 RAG</a>
                                      </li>
                                  
                                      <li class="sidebar-item active">
                                          <a href="/2025/08/%E5%A4%A7%E8%AF%AD%E8%A8%80%E6%A8%A1%E5%9E%8B/3.3-Agent/">3.3 Agent</a>
                                      </li>
                                  
                              </ul>
                          </div>
                      </details>
                  </li>
              
          </ul>
      </nav>
    
  </aside>

  <article class="post-content">
    

    <h1>3.3 Agent</h1>
    <!-- <div class="post-meta">
      
        <time class="post-date-tag" datetime="2025-08-18T16:00:00.000Z">
            å‘å¸ƒäº: 2025-08-19
        </time>
      
    </div> -->
    <div class="post-body">
        <div align=center><img src="https://raw.gitmirror.com/inferiorStudent/resource-CDN/main/llm/2.1-agent-process.svg"></div>
<h1 id="1-æç¤ºè¯å·¥ç¨‹">1 æç¤ºè¯å·¥ç¨‹</h1>
<p>å½“æˆ‘ä»¬å¯¹ä¸åŒçš„äººè¯´åŒä¸€å¥è¯æ—¶ï¼Œå¾—åˆ°çš„å›å¤å„ä¸ç›¸åŒã€‚ä½†æ˜¯å¯¹äºAIæ¥è¯´ï¼Œå½“æˆ‘ä»¬æŠŠè¿™å¥è¯ï¼ˆUser Promptï¼‰è¯´ç»™å¤§æ¨¡å‹æ—¶ï¼Œå¤§æ¨¡å‹åªæœ‰ä¸€ç§ä¸­è‚¯çš„å›ç­”ã€‚å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦åœ¨Prompté‡Œé¢åŠ ä¸Šä¸€ä¸ªè§’è‰²æ‰®æ¼”çš„ç³»ç»Ÿæç¤ºï¼ˆSystem Promptï¼‰ï¼Œâ€œå‚¬çœ â€å¤§æ¨¡å‹ï¼Œè®©å…¶åœ¨ç‰¹å®šè§’è‰²ä¸‹ä½œå‡ºå›ç­”ã€‚åœ¨ç½‘é¡µç«¯çš„System Promptå¾€å¾€æ˜¯é¢„è®¾çš„ï¼Œæœ‰äº›å¤§æ¨¡å‹æ¯”å¦‚ChatGPTæä¾›äº†ä¸€ä¸ªCustomize ChatGPTçš„åŠŸèƒ½æ¥ä¿®æ”¹System Promptï¼Œç”¨æˆ·å¯ä»¥åœ¨é‡Œé¢å†™è‡ªå·±çš„åå¥½ã€‚</p>
<p>å®é™…ä¸Šï¼Œè¿™äº›è¿˜æ˜¯éœ€è¦ç”¨æˆ·è‡ªå·±äº²è‡ªåŠ¨æ‰‹å®Œæˆã€‚é‚£ä¹ˆèƒ½å¦è®©AIè‡ªå·±å»å®Œæˆå‘¢ï¼Ÿå¼€æºé¡¹ç›®AutoGPTå°±æ˜¯å°è¯•å®Œæˆè¿™ç§è‡ªåŠ¨åŒ–çš„æ“ä½œã€‚</p>
<h1 id="2-æ™ºèƒ½ä½“">2 æ™ºèƒ½ä½“</h1>
<h2 id="2-1-Agentå’Œå¤§æ¨¡å‹çš„é€šä¿¡">2.1 Agentå’Œå¤§æ¨¡å‹çš„é€šä¿¡</h2>
<p>è‹¥ä½ æƒ³è®©AutoGPTå¸®ä½ ç®¡ç†ç”µè„‘ä¸­çš„æ–‡ä»¶ï¼Œä½ éœ€è¦å†™å¥½æ–‡ä»¶çš„ç®¡ç†å‡½æ•°ï¼ˆ<strong>Agent Tool</strong>ï¼‰ï¼Œå¦‚åˆ—å‡ºç›®å½•ã€è¯»å–æ–‡ä»¶ï¼Œå¹¶å°†è¿™äº›å‡½æ•°çš„åŠŸèƒ½æè¿°ã€ä½¿ç”¨æ–¹æ³•æ³¨å†Œåˆ°AutoGPTä¸­ï¼ŒAutoGPTä¼šæ ¹æ®è¿™äº›ä¿¡æ¯ç”Ÿæˆä¸€ä¸ªSystem Promptï¼ˆåŒ…æ‹¬è¿”å›æ ¼å¼çš„è¦æ±‚ï¼‰ï¼Œæœ€åè¿åŒç”¨æˆ·è¯·æ±‚ä¸€èµ·æ‰“åŒ…å‘ç»™å¤§æ¨¡å‹ã€‚AutoGPTè§£æå¤§æ¨¡å‹è¿”å›çš„è°ƒç”¨æŸä¸ªå‡½æ•°çš„æ¶ˆæ¯ä¹‹åï¼Œè°ƒç”¨å¯¹åº”çš„å‡½æ•°ï¼Œå†æŠŠç»“æœè¿”å›ç»™å¤§æ¨¡å‹ï¼ŒAIå†é€šè¿‡è¿”å›çš„ç»“æœå†³å®šä¸‹ä¸€æ­¥è¯¥åšä»€ä¹ˆï¼Œé‡å¤ä»¥ä¸Šæ“ä½œç›´åˆ°ä»»åŠ¡å®Œæˆã€‚</p>
<p>å½“ç„¶ï¼ŒAIæ‰€è¿”å›çš„æ ¼å¼ä¸å¯¹æ—¶ï¼ŒAgentä¼šè‡ªåŠ¨é‡è¯•ã€‚å¦‚Clienã€‚ä½†è¿™ç§é‡è¯•å¸¦æ¥çš„é€šä¿¡å¼€é”€éå¸¸å¤§ï¼Ÿå› æ­¤ï¼Œå¤§æ¨¡å‹å‚å•†æ¨å‡ºFunction Callingï¼Œå³ç»Ÿä¸€æ ¼å¼ã€‚ä¹‹å‰çš„System Promptæ˜¯é€šè¿‡è‡ªç„¶è¯­è¨€æè¿°çš„ï¼ŒFunction Callingåˆ™å¯¹ç³»ç»Ÿæç¤ºè¯æ ¼å¼ç»Ÿä¸€ï¼Œå¦‚æ¯ä¸ªå·¥å…·éƒ½ç”¨ä¸€ä¸ªJSONæ¥å®šä¹‰å·¥å…·ï¼š</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;open-file&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;desc&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;æ‰“å¼€æ–‡ä»¶&quot;</span><span class="hljs-punctuation">,</span>		<span class="hljs-comment">// description</span><br>    <span class="hljs-attr">&quot;params&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;path&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;xxx&quot;</span><br>    <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure>
<p>åŒæ—¶Function Callingä¹Ÿè§„å®šäº†AIå®ç”¨å·¥å…·æ—¶å¿…é¡»è¿”å›çš„æ ¼å¼ã€‚è¿™ä¸ªåŠŸèƒ½å†™åœ¨äº†AIæœåŠ¡å™¨ç«¯ï¼Œå› æ­¤AIå›å¤çš„æ ¼å¼ä¸å¯¹æ—¶AIæœåŠ¡å™¨ç«¯å°±è‡ªå·±æ£€æŸ¥é‡è¯•ã€‚è¿™æ ·ä¸€æ¥ç”¨æˆ·ç«¯å’ŒAIæœåŠ¡ç«¯ä¹‹é—´é‡è¯•çš„é€šä¿¡å¼€é”€å°±æ²¡æœ‰äº†ã€‚ä½†æ¯å®¶çš„Function Calling APIå„ä¸ç›¸åŒï¼Œå¾ˆå¤šå¼€æºå¤§æ¨¡å‹ä¹Ÿä¸æ”¯æŒï¼Œå› æ­¤å†™ä¸€ä¸ªè·¨æ¨¡å‹é€šç”¨çš„AI Agentä¼šè¿‡äºå¤æ‚ã€‚</p>
<h2 id="2-2-Agentå’ŒAgent-Toolsé€šä¿¡">2.2 Agentå’ŒAgent Toolsé€šä¿¡</h2>
<p>å¤§å¤šæ•°Agentéƒ½æ˜¯å°†Agent Toolå’ŒAgentå†™åœ¨åŒä¸€è¿›ç¨‹ä¸­ï¼Œç›´æ¥å‡½æ•°è°ƒç”¨ã€‚ä½†æœ‰æ—¶å€™ä¸€ä¸ªToolçš„åŠŸèƒ½é€šç”¨ï¼Œå¯ä»¥ä¸ºå¤šä¸ªæ™ºèƒ½ä½“æ‰€ç”¨ï¼Œå› æ­¤å¯ä»¥å°†Toolå˜æˆæœåŠ¡åŒä¸€æ‰˜ç®¡ï¼Œè®©æ‰€æœ‰çš„Agentåœ¨æœåŠ¡ä¸­è°ƒç”¨ï¼Œè¿™ç§æ–¹å¼å°±æ˜¯MCPã€‚</p>
<h2 id="2-3-é…ç½®ä¸€ä¸ªæ™ºèƒ½ä½“">2.3 é…ç½®ä¸€ä¸ªæ™ºèƒ½ä½“</h2>
<p>ä½¿ç”¨Pydantic AIæ„å»ºä¸€ä¸ªç®€å•çš„æ™ºèƒ½ä½“ç¨‹åºï¼Œä¸åŒ…å«MCPã€‚ç›®å½•ç»“æ„å¦‚ä¸‹ï¼Œå…¶ä¸­<code>.env</code>æ˜¯é…ç½®ç¯å¢ƒå˜é‡çš„ã€‚å¯¹äºGeminiè€Œè¨€ï¼Œå…¶API Keyéœ€è¦æ”¾åˆ°ä¸€ä¸ªåä¸º<code>GEMINI_API_KEY</code>çš„ç¯å¢ƒå˜é‡ä¸­</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">ğŸ“ tool_box<br>â”‚   â”œâ”€â”€ ğŸ“„ a.cpp<br>â”‚   â”œâ”€â”€ ğŸ“„ b.go<br>â”‚   â””â”€â”€ ğŸ“„ c.py<br>â”œâ”€â”€ âš™ .env<br>â”œâ”€â”€ ğŸ“„ main.py<br>â””â”€â”€ ğŸ“„ tools.py<br></code></pre></td></tr></table></figure>
<p><code>tools.py</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> <span class="hljs-type">Any</span><br><span class="hljs-keyword">from</span> pathlib <span class="hljs-keyword">import</span> Path<br><span class="hljs-keyword">import</span> os<br><br>base_dir = Path(<span class="hljs-string">&quot;./tool_box&quot;</span>)<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">read_file</span>(<span class="hljs-params">name: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">str</span>:<br>    <span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string">    @Return file content if exist else error info</span><br><span class="hljs-string">    &#x27;&#x27;&#x27;</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;read file <span class="hljs-subst">&#123;name&#125;</span>&quot;</span>)<br>    <span class="hljs-keyword">try</span>:<br>        <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(base_dir / name, <span class="hljs-string">&quot;r&quot;</span>) <span class="hljs-keyword">as</span> f:<br>            content: <span class="hljs-built_in">str</span> = f.read()<br>        <span class="hljs-keyword">return</span> content<br>    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">f&quot;Error occured: <span class="hljs-subst">&#123;e&#125;</span>&quot;</span><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">list_files</span>() -&gt; <span class="hljs-built_in">list</span>[<span class="hljs-built_in">str</span>]:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;list files&quot;</span>)<br>    file_lists: <span class="hljs-built_in">list</span>[<span class="hljs-type">Any</span>] = []<br>    <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> base_dir.rglob(<span class="hljs-string">&quot;*&quot;</span>):<br>        <span class="hljs-keyword">if</span> item.is_file():<br>            file_lists.append(<span class="hljs-built_in">str</span>(item.relative_to(base_dir)))<br>    <span class="hljs-keyword">return</span> file_lists<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">rename_file</span>(<span class="hljs-params">name: <span class="hljs-built_in">str</span>, new_name: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">str</span>:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;rename file <span class="hljs-subst">&#123;name&#125;</span> to <span class="hljs-subst">&#123;new_name&#125;</span>&quot;</span>)<br>    <span class="hljs-keyword">try</span>:<br>        new_path: Path = base_dir / new_name<br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> <span class="hljs-built_in">str</span>(new_path).startswith(<span class="hljs-built_in">str</span>(base_dir)):<br>            <span class="hljs-keyword">return</span> <span class="hljs-string">f&quot;Error: new name <span class="hljs-subst">&#123;new_name&#125;</span> is outside the dir&quot;</span><br>        os.makedirs(new_path.parent, exist_ok=<span class="hljs-literal">True</span>)<br>        os.rename(base_dir / name, new_path)<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;success!&quot;</span><br>    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">f&quot;Error: <span class="hljs-subst">&#123;e&#125;</span>&quot;</span><br></code></pre></td></tr></table></figure>
<p>å¦‚æœå…‰çœ‹å‡½æ•°åè¿˜ä¸æ¸…æ¥šè¿™ä¸ªå‡½æ•°æ˜¯å¹²å•¥çš„ï¼Œé‚£ä¹ˆå¯ä»¥å†™<code>docstring</code>ï¼Œè¿™ä¸ªèƒ½å¤Ÿè¢«AIçœ‹åˆ°</p>
<p><code>main.py</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> pydantic_ai.models.gemini <span class="hljs-keyword">import</span> GeminiModel<br><span class="hljs-keyword">from</span> pydantic_ai <span class="hljs-keyword">import</span> Agent<br><span class="hljs-keyword">from</span> dotenv <span class="hljs-keyword">import</span> load_dotenv      <span class="hljs-comment"># å†™åˆ°ç¯å¢ƒå˜é‡ä¸­</span><br><span class="hljs-keyword">from</span> . <span class="hljs-keyword">import</span> tools<br><span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> <span class="hljs-type">Any</span><br><br>load_dotenv()<br>model = GeminiModel(<span class="hljs-string">&quot;gemini-2.5-flash-preview-04-17&quot;</span>)<br><br>agent = Agent(<br>    model,<br>    system_prompt=<span class="hljs-string">&quot;You are a professor of computer and science&quot;</span>,<br>    tools=[tools.read_file, tools.list_files, tools.rename_file]<br>)<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>() -&gt; <span class="hljs-literal">None</span>:<br>    history: <span class="hljs-built_in">list</span>[<span class="hljs-type">Any</span>] = []<br>    <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>        user_input: <span class="hljs-built_in">str</span> = <span class="hljs-built_in">input</span>(<span class="hljs-string">&quot;Require: &quot;</span>)<br>        res: AgentRunResult[<span class="hljs-built_in">str</span>] = agent.run_sync(<br>            user_input,<br>            message_history=history<br>        )   <span class="hljs-comment"># é»˜è®¤æ¯æ¬¡é—®é¢˜ç›¸äº’ç‹¬ç«‹, å¦‚éœ€è®°å¿†åˆ™è®°å½•history</span><br>        history = <span class="hljs-built_in">list</span>(res.all_messages())<br>        <span class="hljs-built_in">print</span>(res.output)<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    main()<br></code></pre></td></tr></table></figure>
<h1 id="3-MCP">3 MCP</h1>
<ul>
<li>
<p>Model Context Protocolï¼Œæ¨¡å‹ä¸Šä¸‹æ–‡åè®®ï¼Œä¸“é—¨ç”¨æ¥è§„èŒƒæ™ºèƒ½ä½“/AIå®¢æˆ·ç«¯ï¼ˆMCP Clientï¼‰å’ŒToolæœåŠ¡ï¼ˆMCP Serverï¼‰ä¹‹é—´çš„äº¤äº’ã€‚å½“ç„¶ï¼ŒMCP Serverä¹Ÿèƒ½ç›´æ¥æä¾›æ•°æ®æˆ–è€…æç¤ºè¯ã€‚</p>
</li>
<li>
<p>é€šä¿¡æœºåˆ¶</p>
<ul>
<li>
<p><strong>Stdio</strong>ï¼šæ ‡å‡†è¾“å…¥è¾“å‡ºã€‚<strong>æœ¬åœ°</strong>é€šä¿¡æœºåˆ¶ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨åœ¨åŒä¸€å°æœºå™¨ä¸Šè¿è¡Œã€‚é€šè¿‡æ ‡å‡†è¾“å…¥è¾“å‡ºä¼ è¾“JSON-RPCæ¶ˆæ¯</p>
</li>
<li>
<p><strong>SSE</strong>ï¼šServer Sent Eventï¼ŒåŸºäºHTTPçš„å•å‘æµå¼é€šä¿¡æœºåˆ¶ï¼Œ20250326çš„MCPç‰ˆæœ¬<mark>å·²å¼ƒç”¨</mark>ï¼Œæ”¹ç”¨ä¸‹é¢çš„æœºåˆ¶</p>
</li>
<li>
<p><strong>StreamableHTTP</strong>ï¼šåŒå‘é€šä¿¡æœºåˆ¶</p>
</li>
</ul>
</li>
</ul>

    </div>
    <script>
    document.addEventListener('DOMContentLoaded', () => {
        const codeBlocks = document.querySelectorAll('figure.highlight');
    
        codeBlocks.forEach(block => {
            // 1. è·å–è¯­è¨€æ ‡ç­¾
            const lang = block.classList.contains('highlight') ? 
                         block.classList[1] : '';
    
            // 2. åˆ›å»ºä¸€ä¸ªå®¹å™¨æ¥åŒ…è£¹è¯­è¨€æ ‡ç­¾å’Œå¤åˆ¶æŒ‰é’®
            const toolbar = document.createElement('div');
            toolbar.className = 'highlight-toolbar';
    
            // 3. åˆ›å»ºè¯­è¨€æ ‡ç­¾
            if (lang) {
                const langLabel = document.createElement('span');
                langLabel.className = 'highlight-lang';
                langLabel.textContent = lang.toUpperCase();
                toolbar.appendChild(langLabel);
            }
    
            // 4. åˆ›å»ºå¤åˆ¶æŒ‰é’®
            const copyButton = document.createElement('button');
            copyButton.className = 'highlight-copy-btn';
            copyButton.textContent = 'å¤åˆ¶';
            
            copyButton.addEventListener('click', () => {
                // ä¼˜å…ˆé€‰æ‹© .code å…ƒç´ ï¼ˆé’ˆå¯¹æœ‰è¡Œå·çš„è¡¨æ ¼ï¼‰ï¼Œå¦‚æœæ²¡æœ‰åˆ™é€‰æ‹© pre å…ƒç´ 
                const codeElement = block.querySelector('.code') || block.querySelector('pre');
                if (codeElement) {
                    navigator.clipboard.writeText(codeElement.textContent).then(() => {
                        copyButton.textContent = 'å·²å¤åˆ¶!';
                        setTimeout(() => {
                            copyButton.textContent = 'å¤åˆ¶';
                        }, 2000);
                    }).catch(err => {
                        console.error('å¤åˆ¶å¤±è´¥: ', err);
                    });
                }
            });
            toolbar.appendChild(copyButton);
    
            // 5. å°†å·¥å…·æ æ’å…¥åˆ°ä»£ç å—ä¸­
            block.appendChild(toolbar);
        });
    });
</script>
  </article>
</div>

    </div>
    
<script src="/js/script.js"></script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ["$","$"], ["\\(","\\)"] ],
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            processEscapes: true
        }
    });
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax();
        for (var i = 0; i < all.length; ++i)
            all[i].SourceElement().parentNode.className += ' has-jax';
    });
</script>
<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2.1 依赖管理 | Hexo</title>
    
<link rel="stylesheet" href="/css/style.css">

    <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
          TeX: {
            extensions: ["amsmath.js", "cancel.js"],
          }
        });
    </script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex/dist/katex.min.css"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
<meta name="generator" content="Hexo 7.3.0"></head>
<body>
    <div class="container">
        <header class="post-navbar">
    <a href="/" class="nav-left">
        <img src="/img/avatar.jpg" alt="Avatar" class="nav-avatar">
        <span class="nav-title">上下求索</span>
    </a>

    <div class="nav-right">
        <div class="nav-item search-trigger">
            <img src="/img/icons/search.svg" alt="Search" class="search-icon">
            <span>请输入关键词搜索...</span>
        </div>

        <a href="/notes/" class="nav-link">笔记导航</a>

        <div class="nav-item theme-switcher">
            <img src="/img/icons/sun.svg" alt="Sun" class="sun-icon">
            <img src="/img/icons/moon.svg" alt="Moon" class="moon-icon">
        </div>
    </div>
</header>

<div id="search-modal" class="modal-overlay" style="display: none;">
    <div class="modal-content">
        <input type="text" id="search-input" placeholder="输入关键字搜索...">
        <div id="search-results"></div>
    </div>
</div>
<div class="post-layout">
  <aside class="post-sidebar">
    
    
      
      <nav>
        <div class="sidebar-top">
          <a href="/" class="back-to-home-link" style="display: flex; align-items: center">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m15 18l-6-6l6-6"/></svg>
            <span>返回首页</span>
          </a>
        </div>
        <div style="padding: 20px;">
            <p>该笔记未设置分类，无法生成导航。</p>
        </div>
      </nav>
    
  </aside>

  <article class="post-content">
    
      <div id="toc-container" class="toc-container collapsed">
        <button id="toc-toggle-btn" class="toc-toggle-btn">☰</button>
        <div class="toc-title">
            <span>文章目录</span>
        </div>
        <div class="toc-list">
            <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#1-conda%E7%AE%A1%E7%90%86"><span class="toc-text">1 conda管理</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-1-%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83%E7%9A%84%E5%88%9B%E5%BB%BA%E4%B8%8E%E9%94%80%E6%AF%81"><span class="toc-text">1.1 虚拟环境的创建与销毁</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-2-%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83%E4%BE%9D%E8%B5%96%E5%AE%89%E8%A3%85"><span class="toc-text">1.2 虚拟环境依赖安装</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-3-%E4%BD%BF%E7%94%A8requirements-txt"><span class="toc-text">1.3 使用requirements.txt</span></a></li></ol></li></ol>
        </div>
      </div>
    

    <h1>2.1 依赖管理</h1>
    <!-- <div class="post-meta">
      
        <time class="post-date-tag" datetime="2025-08-23T05:39:51.190Z">
            发布于: 2025-08-23
        </time>
      
    </div> -->
    <div class="post-body">
        <h1 id="1-conda管理">1 conda管理</h1>
<p>在Windows操作系统中，下载annoconda，并<u>配置环境变量</u>：将<code>安装路径\Anaconda</code>、<code>安装路径\Anaconda\Scripts</code>、<code>安装路径\Anaconda\Library\bin</code>添加到Path环境变量中。</p>
<h2 id="1-1-虚拟环境的创建与销毁">1.1 虚拟环境的创建与销毁</h2>
<ul>
<li>列出虚拟环境</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">conda <span class="hljs-built_in">env</span> list<br></code></pre></td></tr></table></figure>
<ul>
<li>创建虚拟环境并指定python版本</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">conda create -n 虚拟环境名 python=3.9<br></code></pre></td></tr></table></figure>
<ul>
<li>在上一条的基础上，指定安装路径</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">conda create --prefix=路径\虚拟环境名 虚拟环境名 python=3.9<br></code></pre></td></tr></table></figure>
<ul>
<li>删除虚拟环境</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">conda remove -n 虚拟环境名 --all<br></code></pre></td></tr></table></figure>
<ul>
<li>进入虚拟环境</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">conda activate 虚拟环境名<br></code></pre></td></tr></table></figure>
<h2 id="1-2-虚拟环境依赖安装">1.2 虚拟环境依赖安装</h2>
<ul>
<li>列出所有的库</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">conda list<br></code></pre></td></tr></table></figure>
<ul>
<li>安装库并指定版本</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">pip install numpy==1.21.5 -i https://pypi.tuna.tsinghua.edu.cn/simple<br>pip install Pandas==1.2.4 -i https://pypi.tuna.tsinghua.edu.cn/simple<br>pip install Matplotlib==3.5.1 -i https://pypi.tuna.tsinghua.edu.cn/simple<br></code></pre></td></tr></table></figure>
<ul>
<li>查看某个库的版本</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">pip show numpy<br></code></pre></td></tr></table></figure>
<ul>
<li>更新包版本至最新</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">pip install --upgrade 包名<br></code></pre></td></tr></table></figure>
<ul>
<li>版本降级</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">pip install numpy==1.18.5<br></code></pre></td></tr></table></figure>
<ul>
<li>卸载包（多个包可以用空格隔开）</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">pip uninstall 包名1 包名2<br></code></pre></td></tr></table></figure>
<ul>
<li>退出虚拟环境</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">conda deactivate<br></code></pre></td></tr></table></figure>
<h2 id="1-3-使用requirements-txt">1.3 使用requirements.txt</h2>
<p>在把自己写好的Python代码发给别人的时候，对方可能会缺少代码运行所需要的第三方库，一个一个去pip比较麻烦。这时候可以把项目所需的第三方库导出为一个<code>requirements.txt</code>文件，放在文件夹里一起发给对方。</p>
<ul>
<li>生成依赖文件：<code>pip freeze</code>列出当前虚拟环境中安装的所有Python包及对应的版本，大于号就是Linux中的重定向符号。如果是windows操作系统下呢，我们一般使用conda虚拟环境运行我们的Python脚本。那么如下命令就可以打开conda prompt执行，保存输出的txt文件就存放在了命令行前面一串路径下。</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">pip freeze &gt; requirements.txt<br></code></pre></td></tr></table></figure>
<ul>
<li>根据依赖文件下载对应的包，最好是新建一个虚拟环境</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">pip install -r requirements.txt<br></code></pre></td></tr></table></figure>
<p>很显然，上述依赖打包有很大的缺点。首先创建一个windows下的conda虚拟环境就是为了服务多个python项目，而每个python项目所依赖的包不尽相同，因此该虚拟环境安装的包是多个项目的集合。而我们只需要发送一个项目，打包该虚拟环境的包就会将其他项目中所依赖的、和本项目无关的包也写进来了，因此对方下载依赖就浪费了资源。</p>

    </div>
    <script>
    document.addEventListener('DOMContentLoaded', () => {
        const codeBlocks = document.querySelectorAll('figure.highlight');
    
        codeBlocks.forEach(block => {
            // 1. 获取语言标签
            const lang = block.classList.contains('highlight') ? 
                         block.classList[1] : '';
    
            // 2. 创建一个容器来包裹语言标签和复制按钮
            const toolbar = document.createElement('div');
            toolbar.className = 'highlight-toolbar';
    
            // 3. 创建语言标签
            if (lang) {
                const langLabel = document.createElement('span');
                langLabel.className = 'highlight-lang';
                langLabel.textContent = lang.toUpperCase();
                toolbar.appendChild(langLabel);
            }
    
            // 4. 创建复制按钮
            const copyButton = document.createElement('button');
            copyButton.className = 'highlight-copy-btn';
            copyButton.textContent = '复制';
            
            copyButton.addEventListener('click', () => {
                // 优先选择 .code 元素（针对有行号的表格），如果没有则选择 pre 元素
                const codeElement = block.querySelector('.code') || block.querySelector('pre');
                if (codeElement) {
                    navigator.clipboard.writeText(codeElement.textContent).then(() => {
                        copyButton.textContent = '已复制!';
                        setTimeout(() => {
                            copyButton.textContent = '复制';
                        }, 2000);
                    }).catch(err => {
                        console.error('复制失败: ', err);
                    });
                }
            });
            toolbar.appendChild(copyButton);
    
            // 5. 将工具栏插入到代码块中
            block.appendChild(toolbar);
        });
    });
</script>
  </article>
</div>

    </div>
    
<script src="/js/script.js"></script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ["$","$"], ["\\(","\\)"] ],
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            processEscapes: true
        }
    });
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax();
        for (var i = 0; i < all.length; ++i)
            all[i].SourceElement().parentNode.className += ' has-jax';
    });
</script>
<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
</body>
</html>